function InicializaGrillaFiltroAjax(n,t,i,r,u){function e(){var e=undefined,o=undefined;f=$("#"+n).DataTable({sDom:"<'dt-toolbar'<'col-xs-12 col-sm-6'lf><'table-responsive hidden-xs'C>>t<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",autoWidth:!0,ajax:{url:t,type:"POST",data:i,dataSrc:callBack},createdRow:u,rowReorder:{selector:"td:nth-child(2)"},responsive:!0,columns:r,oLanguage:idioma,dom:'C<"clear">lfrtip',initComplete:function(){this.api().columns(".visible").every(function(){var n=this,t=$('<select class="btn btn-primary dropdown-toggle" data-toggle="dropdown" ><option value="" >Todos <li><span class="glyphicon glyphicon-ok"> <\/span><\/li><\/option><\/select>').appendTo($(n.footer()).empty()).on("change",function(){var t=$.fn.dataTable.util.escapeRegex($(this).val());n.search(t?"^"+t+"$":"",!0,!1).draw()});n.data().unique().sort().each(function(n){t.append('<option value="'+n+'">'+n+"<\/option>")})})}});$("#"+n+" thead th input[type=text]").on("keyup change",function(){f.column($(this).parent().index()+":visible").search(this.value).draw()})}var f;return callBack=typeof callBack!="undefined"?callBack:function(n){return n.data},e(),f}function InicializaMantenedor(n){function t(){var t=undefined,i=undefined,r=undefined;$("#"+n).dataTable({oLanguage:idioma,autoWidth:!0,paging:!0,searching:!0,destroy:!0,deferRender:!0,autoWidth:!0,bAutoWidth:!1,fnPreDrawCallback:function(){},fnRowCallback:function(){},fnDrawCallback:function(){},oTableTools:{aButtons:["copy",{sExtends:"csv",oSelectorOpts:{filter:"applied",order:"current",page:"all"},bShowAll:!0,sFileName:"DescargaCSVTs.csv",bFooter:!1,mColumns:"visible"},{sExtends:"xls",oSelectorOpts:{filter:"applied",order:"current",page:"all"},bShowAll:!0,sFileName:"DescargaExcelTs.xls",bFooter:!1,mColumns:"visible"},{sExtends:"pdf",oSelectorOpts:{filter:"applied",order:"current",page:"all"},bShowAll:!0,sTitle:"TS_PDF",sPdfMessage:"TS PDF Export",sPdfSize:"letter",sPdfOrientation:"landscape",bFooter:!1,mColumns:"visible"},{sExtends:"print",oSelectorOpts:{filter:"applied",order:"current",page:"all"},sMessage:"Generado por Timesheets <i>(Presione ESC para salir)<\/i>",bShowAll:!1,mColumns:"visible"}],sSwfPath:"/js/plugin/datatables/swf/copy_csv_xls_pdf.swf"},aoColumnDefs:[{bSortable:!1,aTargets:["nosort"]}]})}t()}function loadAjaxContent(n){$.ajax({async:!0,beforeSend:function(){$("#content").html('<h4><i class="fa fa-spinner fa-pulse"><\/i> Cargando Solicitud...<\/h4>')},success:function(t){$("#content").html(t);window.history.pushState("","PayRoll-Portal",n)},error:function(){$("#content").html("<h2>Se ha generado un error<\/h2>")},url:n})}function setFormulario(n,t,i,r){(r===undefined||r===null)&&(r="#remoteModal .modal-content");var u=$("#"+n).validate({rules:t,messages:i,errorPlacement:function(n,t){n.insertAfter(t.parent())}});$("button[action=save]").click(function(){var u,t,i;if($("button[action=save]").prop("disabled",!0),$("#"+n).valid()){u=document.getElementById(n);t=new FormData(u);for(i of t.entries())i[0].includes(".monto")&&t.set(i[0],i[1].replace(new RegExp("\\.","g"),""));$.ajax({url:document.getElementById(n).action,type:document.getElementById(n).method,processData:!1,contentType:!1,data:t,success:function(n){if(n.success){switch(n.mensaje){case"Enviado":CorreoExitoso("Correo","Enviado con éxito!");break;case"Evento":mensajeExito("Evento","Creado con éxito!");break;case"Actualizado":mensajeExito("Actualizado","Datos actualizados con éxito!");break;case"Eliminado":mensajeExito("Registro","Eliminado con éxito!");break;case"":mensajeExito("Formulario","Registro con exito");break;case"Comprobante":mensajeExito("Comprobante éxitoso, N° ",n.numero);break;case"SinCambios":mensajeExito("Sin cambios","No hubo cambios en el documento");break;case"Asignacion":mensajeExito("Assignment","Assignment Made Successfully");break;case"Eliminacion":mensajeExito("Elimination","Record Deleted Successfully");break;case"Creado":mensajeExito("Contact","Contact Successfully Created");break;case"Editado":mensajeExito("Edited","Successfully Edited Contact");break;case"ing_Generico":mensajeExito("Form","Successful Registration");break;default:mensajeExito("Formulario","Registro con exito")}loadAjaxContent(window.location.pathname)}else if(n.error)switch(n.mensaje){case"No enviado":CorreoError("Correo","No fue posible enviar correo...");break;case"Evento Fallido":mensajeError("Evento","No fue posible crear Evento...");break;case"":mensajeError("Error","Error al registrar...");break;default:mensajeError("Error",n.mensaje)}else $(r).html(n)},complete:function(){$("button[action=save]").prop("disabled",!1)}})}else console.log("error formulario"),$("button[action=save]").prop("disabled",!1)})}function CierraToastExito(){var n=document.querySelector(".iziToast");iziToast.hide({transitionOut:"fadeOutUp"},n)}function mensajeExitoComprobante(n,t){$("#myModal").modal("hide");iziToast.info({timeout:2e4,overlay:!0,displayMode:"once",id:"inputs",title:n,message:t,position:"center",drag:!1,transitionIn:"fadeInUp",inputs:[['<input type="checkbox">',"change",function(n,t,i){console.info(i.checked)}],['<input type="text">',"keyup",function(n,t,i){console.info(i.value)},!0],['<input type="number">',"keydown",function(n,t,i){console.info(i.value)}],]})}function mensajeExito(n,t){$("#myModal").modal("hide");iziToast.success({timeout:3e3,title:n,message:"<i class='fa fa-clock-o'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}function mensajeExitoModal(n,t,i){switch(i){case"1":iziToast.success({timeout:3e3,title:n,message:"<i class='fa fa-plus-circle'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"});break;case"2":iziToast.info({timeout:3e3,title:n,message:"<i class='glyphicon glyphicon-facetime-video'><\/i> <i>"+t+"...<\/i>",position:"center",transitionIn:"flipInX",transitionOut:"flipOutX"});break;case"3":iziToast.warning({timeout:8e3,title:n,message:"<i>"+t+"<br/><h5>( si puede visualizar los videos... olvide esté mensaje... )<\/h5><\/i>",position:"center",transitionIn:"flipInX",transitionOut:"flipOutX"});break;default:iziToast.warning({timeout:3e3,title:n,message:"<i class='fa fa-minus-circle'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}}function CorreoExitoso(n,t){$("#myModal").modal("hide");iziToast.info({timeout:3e3,title:n,message:"<i class='fa fa-envelope'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}function CorreoError(n,t){$("#myModal").modal("hide");iziToast.warning({timeout:3e3,title:n,message:"<i class='fa fa-envelope'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}function mensajeExito(n,t){$("#myModal3").modal("hide");iziToast.success({timeout:3e3,title:n,message:"<i class='fa fa-clock-o'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}function CorreoExitoso(n,t){$("#myModal3").modal("hide");iziToast.info({timeout:3e3,title:n,message:"<i class='fa fa-envelope'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}function CorreoError(n,t){$("#myModal3").modal("hide");iziToast.warning({timeout:3e3,title:n,message:"<i class='fa fa-envelope'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}function mensajeError(n,t){iziToast.error({title:n,message:"<i class='fa fa-clock-o'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"fadeInDown"})}function confirmDelete(n,t){var i=n;(i==null||i=="")&&(i="¿Desea eliminar el registro?");$("#Modal_Background").modal({backdrop:"static",keyboard:!1}).modal("show");iziToast.show({color:"dark",icon:"icon-person",title:"Eliminación",transitionIn:"flipInX",message:i,position:"center",progressBarColor:"rgb(0, 255, 184)",buttons:[["<button>Ok<\/button>",function(n,i){$.ajax({url:t,error:function(){},success:function(n){n.success?($("#Modal_Background").modal("hide"),mensajeExito("Formulario","Registro procesado con exito"),iziToast.hide({transitionOut:"flipOutX"},i)):n.error&&($("#Modal_Background").modal("hide"),mensajeError("Formulario","Registro con errores<br>"+n.mensaje),iziToast.hide({transitionOut:"flipOutX"},i))},complete:function(){loadAjaxContent(window.location.pathname)}})}],["<button>Close<\/button>",function(n,t){iziToast.hide({transitionOut:"flipOutX"},t);$("#Modal_Background").modal("hide")}]],onClose:function(){$("#Modal_Background").modal("hide")}})}function confirmDeletePost(n,t,i){var r=n;(r==null||r=="")&&(r="¿Desea eliminar el registro?");$("#Modal_Background").modal({backdrop:"static",keyboard:!1}).modal("show");iziToast.show({color:"dark",icon:"icon-person",title:"Eliminación",transitionIn:"flipInX",message:r,position:"center",progressBarColor:"rgb(0, 255, 184)",buttons:[["<button>Ok<\/button>",function(n,r){$.ajax({url:t,data:{id:i},type:"POST",error:function(){},success:function(n){n.success?($("#Modal_Background").modal("hide"),mensajeExito("Formulario","Registro procesado con exito"),iziToast.hide({transitionOut:"flipOutX"},r)):n.error&&($("#Modal_Background").modal("hide"),mensajeError("Formulario","Registro con errores<br>"+n.mensaje),iziToast.hide({transitionOut:"flipOutX"},r))},complete:function(){loadAjaxContent(window.location.pathname)}})}],["<button>Close<\/button>",function(n,t){iziToast.hide({transitionOut:"flipOutX"},t);$("#Modal_Background").modal("hide")}]],onClose:function(){$("#Modal_Background").modal("hide")}})}function copiaTexto(n){$(n).click(function(){var n;$(this).select();var i=$.trim($(this).text()),r=document.createElement("textarea"),t=document.createRange();t.selectNodeContents(this);n=window.getSelection();n.removeAllRanges();n.addRange(t);r.value=i;document.execCommand("copy");mensajeExitoPrueba("El texto","seleccionado se a copiado")})}function Suma_montos(){total=0;parcial=0;$(".monto").each(function(n,t){parcial=Number(t.value.replace(/\./g,""));total=parcial+total});$(".total_monto").val(total);$(".total_monto").unmask();$(".total_monto").mask("000.000.000.000",{reverse:!0})}function mensajeExitoPrueba(n,t){iziToast.success({timeout:5e3,title:n,message:"<i class='fa fa-clock-o'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}function confirmActualizar(n,t){var i=n;(i==null||i=="")&&(i="¿Desea reiniciar su Clave?");$("#Modal_Background").modal({backdrop:"static",keyboard:!1}).modal("show");iziToast.show({color:"dark",icon:"icon-person",title:"Reinicio Clave",transitionIn:"flipInX",message:i,position:"center",progressBarColor:"rgb(0, 255, 184)",buttons:[["<button>Ok<\/button>",function(n,i){$.ajax({url:t,error:function(){},success:function(n){n.success?($("#Modal_Background").modal("hide"),mensajeExito("Solicitud","Solicitud procesado con exito. Clave por defecto de Softland"),iziToast.hide({transitionOut:"flipOutX"},i)):n.error&&($("#Modal_Background").modal("hide"),mensajeError("Solicitud","Solicitud con errores.<br>"+n.mensaje),iziToast.hide({transitionOut:"flipOutX"},i))},complete:function(){loadAjaxContent(window.location.pathname)}})}],["<button>Close<\/button>",function(n,t){iziToast.hide({transitionOut:"flipOutX"},t);$("#Modal_Background").modal("hide")}]],onClose:function(){$("#Modal_Background").modal("hide")}})}function pruebaExito(n,t){$("#myModal").modal("hide");iziToast.success({timeout:3e3,title:n,message:"<i class='fa fa-clock-o'><\/i> <i>"+t+"...<\/i>",position:"topRight",transitionIn:"bounceInLeft"})}function refreshAuthorizeToken(){$.ajax({type:"POST",url:"Declaraciones/GetToken",dataType:"json",contentType:"json",async:!1,success:function(n){localStorage.access_token_=n.access_token;localStorage.token_type_=n.token_type;localStorage.expires_in_=n.expires_in-99;localStorage.date_access_token_=(new Date).getTime()/1e3},error:function(n,t,i){console.log(t+" - "+i)}})}function getToken(){return parseFloat(localStorage.date_access_token_)+parseFloat(localStorage.expires_in_)<(new Date).getTime()/1e3||localStorage.expires_in_==undefined||localStorage.date_access_token_==undefined?(refreshAuthorizeToken(),localStorage.access_token_):localStorage.access_token_}function confirmAprobacionBeta(n,t){var i=n;(i==null||i=="")&&(i="¿Desea Iniciar el Beta?");$("#Modal_Background").modal({backdrop:"static",keyboard:!1}).modal("show");iziToast.show({color:"blue",icon:"icon-person",title:"Aprobación",transitionIn:"flipInX",message:i,position:"center",progressBarColor:"white",buttons:[["<button>Ok<\/button>",function(n,i){$.ajax({url:t,error:function(){},success:function(n){n.success?($("#Modal_Background").modal("hide"),mensajeExito("Formulario","Registro procesado con exito"),iziToast.hide({transitionOut:"flipOutX"},i)):n.error&&($("#Modal_Background").modal("hide"),mensajeError("Formulario","Registro con errores<br>"+n.mensaje),iziToast.hide({transitionOut:"flipOutX"},i))},complete:function(){loadAjaxContent(window.location.pathname)}})}],["<button>Close<\/button>",function(n,t){iziToast.hide({transitionOut:"flipOutX"},t);$("#Modal_Background").modal("hide")}]],onClose:function(){$("#Modal_Background").modal("hide")}})}var idioma={sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún registro disponible en esta tabla",sInfo:"_START_ al _END_ de _TOTAL_ registros",sInfoEmpty:"sin registros a mostrar",sInfoFiltered:"(de _MAX_ registros)",sInfoPostFix:"",sSearch:'<span class="input-group-addon"><i class="glyphicon glyphicon-search"><\/i><\/span>',sUrl:"",sInfoThousands:".",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}};Number.prototype.padLeft=function(n,t){var i=String(n||10).length-String(this).length+1;return i>0?new Array(i).join(t||"0")+this:this};$(document).on("ready",function(){$(document).on("click","a.main-content",function(n){n.preventDefault();var t=$(this).attr("href");loadAjaxContent(t)});$("#myModal").on("show.bs.modal",function(n){var i=$(n.relatedTarget),t;i.hasClass("modal-ajax-load")&&(i.hasClass("pdf-size")?$(this).find(".modal-dialog").css({position:"relative",display:"table","overflow-y":"auto","overflow-x":"auto",width:"auto","min-width":"calc(100% - 100px)"}):$(this).find(".modal-dialog").removeAttr("style"),t=$(this).find(".modal-content"),$.ajax({async:!0,beforeSend:function(){t.html('<h4><i class="fa fa-refresh fa-spin"><\/i> Cargando Solicitud...<\/h4>')},success:function(n){t.html(n)},error:function(){t.html("<h4>Se ha generado un error<\/h4>")},url:i.attr("href")}))});$("#myModal3").on("show.bs.modal",function(n){var i=$(n.relatedTarget),t;i.hasClass("modal-ajax-load")&&(i.hasClass("pdf-size")?$(this).find(".modal-dialog").css({position:"relative",display:"table","overflow-y":"auto","overflow-x":"auto",width:"auto","min-width":"calc(100% - 100px)"}):$(this).find(".modal-dialog").removeAttr("style"),t=$(this).find(".modal-content"),$.ajax({async:!0,beforeSend:function(){t.html('<h4><i class="fa fa-refresh fa-spin"><\/i> Cargando Solicitud...<\/h4>')},success:function(n){t.html(n)},error:function(){t.html("<h4>Se ha generado un error<\/h4>")},url:i.attr("href")}))});var n;$("#cliente_login").on("focus",function(){n=this.value}).change(function(){$.ajax({data:{cliente:$(this).val()},success:function(t){t.success?(mensajeExito("Formulario","Cliente Cambiado con exito"),location.reload(!0)):t.error&&($(this).val(n),mensajeError("Formulario",t.mensaje))},error:function(){mensajeError("Formulario","");$(this).val(n)},url:$("#base_url").val()+"/home/ChangeCliente"})})});$.ajaxPrefilter(function(n){var i=n.success,t;n.success=function(n,t,r){if(typeof i=="function"){if(r.status==200)return i(n,t,r);if(r.status==295||r.status>=400&&r.status<=499||r.status>=500&&r.status<=599)return document.open("text/html","replace"),document.write(n),document.close(),null}};t=n.error;n.error=function(n,i,r){if(typeof t=="function"){if(n.status==200)return t(n,i,r);if(n.status>=400&&n.status<=499||n.status>=500&&n.status<=599)return document.open("text/html","replace"),document.write(n.responseText),document.close(),null}}});